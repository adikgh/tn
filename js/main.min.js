var tabBtns=$("#how-we-work .tabs-btn .btn");tabBtns.click(function(){var a=$(this);$("#how-we-work .tabs-content .content").removeClass("show");$("#how-we-work .tabs-content .content#"+a.data("for")).addClass("show");tabBtns.removeClass("active");a.addClass("active")});tabBtns.eq(0).trigger("click");$(document).ready(function(){$("#reviews .items").owlCarousel({loop:true,dots:true,nav:true,navText:"",navContainer:"#reviews .nav",dotsContainer:"#reviews .dots",items:1,margin:20,autoplay:true,autoplayHoverPause:true});if(window.innerWidth<768){var a=$("#first-screen .advantages .items");a.addClass("owl-carousel");a.owlCarousel({loop:true,navText:["",""],navElement:"div",dots:true,autoplay:true,autoplayTimeout:5000,autoplayHoverPause:true,margin:25,stagePadding:40,items:1})}});var gotopBtn=$("#gotop-btn");var header=$("header");gotopBtn.click(function(){$("html").animate({scrollTop:0},1500)});function headerScroll(){var a=$(this).scrollTop();if(a>150){gotopBtn.addClass("show")}else{gotopBtn.removeClass("show")}if($(this).scrollTop()>50){header.addClass("shadow")}else{header.removeClass("shadow")}}$(window).scroll(headerScroll);headerScroll();$("body").on("click","a.scroll-link",function(a){if($(this).hasClass("click-scroll")){$('#how-we-work .btn[data-for="'+$(this).attr("data-item")+'"]').click()}a.preventDefault();var c=$(this).attr("href");var b=$(c).offset().top-60;$("html").animate({scrollTop:b},1500)});function fbHidePopup(){$("#feedback-popup").removeClass("show")}function fbShowPopup(){$("#feedback-popup").addClass("show")}function sendFeedback(c){try{c=$(c)}catch(j){console.error("JQuery is required");return false}var k=c.find("input[name=name]"),g=k.val(),m=c.find("input[name=phone]"),i=m.val(),o=c.find("input[name=email]"),d=o.val(),b=c.find("textarea[name=text]"),l=b.val(),h=c.find("input[type=radio][name=city]:checked, input[type=hidden][name=city]"),n=h.val(),a=c.find("input[name=additional_description]");if(i.replace(/_/g,"").length<6){alert("Номер телефона обязателен для заполнения");return false}var f=c.find("[type=submit]");f.html(f.data("text-waiting")).attr("title",f.data("text-waiting")).attr("disabled","disabled");$.ajax({type:"POST",url:"/send-feedback",data:{name:g,phone:i,email:d,city:n,text:l,additional_description:a?a.val():null},headers:{"X-CSRF-TOKEN":$("meta[name=csrf-token]").attr("content")},success:function(p){try{p=JSON.parse(p);if(p.status==="success"){c.find("input, textarea").val("");location.href=p.redirect==="thanks"?"/thanks?id="+p.id+"&referer="+encodeURIComponent(location.href):p.redirect}else{alert("Произошла ошибка. Повторите попыптку позже или обратитесь к администрации сайта.")}}catch(q){alert("Произошла ошибка. Повторите попыптку позже или обратитесь к администрации сайта.")}},error:function(e){console.log(e);alert("Произошла ошибка. Повторите попыптку позже или обратитесь к администрации сайта.")},complete:function(){f.html(f.data("text-static")).attr("title",f.data("text-static")).removeAttr("disabled")}});return false}var block_city_changer_list=$(".block-city-changer-list");$(document).mousedown(function(b){if(!block_city_changer_list.is(b.target)&&block_city_changer_list.has(b.target).length===0&&block_city_changer_list.hasClass("show")){block_city_changer_list.removeClass("show")}});$(".block-city-changer-current").on("click",function(){$(this).next(".block-city-changer-list").addClass("show")});var workBtns=$("#our-work .tabs-btn .btn");var workContentItems=$("#our-work .item");workBtns.click(function(){var b=$(this);var a=$("#"+b.data("for"));workBtns.removeClass("active");b.addClass("active");workContentItems.addClass("hide");a.removeClass("hide");$(window).trigger("resize.twentytwenty")});var mobileCityBlock=$("header .mobile-panel .city-change-block");$(document).mouseup(function(b){if(!mobileCityBlock.is(b.target)&&mobileCityBlock.has(b.target).length===0){mobileCityBlock.removeClass("active")}});mobileCityBlock.click(function(){if(mobileCityBlock.hasClass("active")){mobileCityBlock.removeClass("active")}else{mobileCityBlock.addClass("active")}});setTimeout(function(){$(".twentytwenty-container").twentytwenty({default_offset_pct:0.5});workBtns.eq(0).trigger("click")},1000);function fbfShowPopup(){$("#feedback-popup-full").addClass("show")}function fbfHidePopup(){$("#feedback-popup-full").removeClass("show")}$("#our-work .controller-arrows .next").click(function(){var a=$("#our-work .tabs-btn .btn.active").next();if(a.length>0){a.trigger("click")}else{workBtns.first().trigger("click")}});$("#our-work .controller-arrows .prev").click(function(){var a=$("#our-work .tabs-btn .btn.active").prev();if(a.length>0){a.trigger("click")}else{workBtns.last().trigger("click")}});var cityTitles={almaty:"Алматы",shymkent:"Шымкент",astana:"Астана"};if(window.innerWidth<768){$("#our-team .items").addClass("owl-carousel").owlCarousel({loop:true,items:1,dots:false,nav:false,margin:20,stagePadding:40,navText:""});$("#equipment .items").addClass("owl-carousel").owlCarousel({loop:true,navText:["",""],navElement:"div",dots:true,autoplay:false,autoplayTimeout:5000,autoplayHoverPause:true,margin:20,stagePadding:40,items:1})}$(".btn-anchor").on("click",function(b){b.preventDefault();var c=$(this).attr("href"),a=($(c).offset().top)-100;$("html").animate({scrollTop:a},1000)});$(".input-mask-phone").inputmask("+7 (999) 999-9999",{placeholder:"_"});Inputmask({regex:"[A-Za-z|А-Яа-я|\\s]*"}).mask(".input-mask-string");$(".input-require input").on("focus blur input change keyup",function(){var a=$(this),b="input-require--show",c=a.closest(".input-require");if(a.val()!==""){c.removeClass(b)}else{c.addClass(b)}});$("#price .collapse__header").on("click",function(d){d.preventDefault();var b="collapse__header--active",e=$(this),c=e.next(".collapse__content"),a=c.find(".collapse__wrapper").css("height");if(e.hasClass(b)){e.removeClass(b);c.css("height",0)}else{$("#price .collapse__header").removeClass(b);$("#price .collapse__content").css("height",0);e.addClass(b);c.css("height",a)}});var mobileMenu=$("header .mobile-menu");$("header .mobile-menu-btn").click(function(){mobileMenu.addClass("show")});mobileMenu.find(".close-menu, li a").click(function(){mobileMenu.removeClass("show")});var howWeWorkStep=0;setInterval(function(){let content=$("#how-we-work .tabs-content .content");content.removeClass("content--"+howWeWorkStep);howWeWorkStep++;if(howWeWorkStep>3){howWeWorkStep=1}content.addClass("content--"+howWeWorkStep)},10000);function reviewShowPopup(){$(".review-modal").addClass("show");$("body, html").addClass("overflow-hidden")}function reviewHidePopup(){$(".review-modal").removeClass("show");$("body, html").removeClass("overflow-hidden")}$("#review-modal-file-input").on("change",function(){let file=this.files[0];$(".review-modal-file__button").text(file===undefined?"Выберите файл":file.name)});$(".review-modal__form").on("submit",function(a){a.preventDefault();let name=$(".review-modal__input[name=name]"),phone=$(".review-modal__input[name=phone]"),age=$(".review-modal__input[name=age]"),photo=$("#review-modal-file-input").get(0).files[0],text=$(".review-modal__input[name=text]"),city=$(".review-modal__input[name=city]"),submit_btn=$(".review-modal__form [type=submit]");if(name.val().trim()===""){name.focus().addClass("error");return false}if(phone.val()===""||/\_/.test(phone.val())){phone.focus().addClass("error");return false}if(age.val().trim()===""||/\.\,/.test(age.val())){age.focus().addClass("error");return false}if(photo===undefined){alert("Загрузите фото");return false}if(!/\.(png|jpeg|jpg)$/.test(photo.name)){alert("Допустимые расширения файлов: png, jpeg, jpg");return false}if(photo.size/1000000>2){alert("Максимальный вес фото 2МБ");return false}if(text.val().trim()===""){text.focus().addClass("error");return false}let form_data=new FormData();form_data.append("name",name.val());form_data.append("phone",phone.val());form_data.append("age",age.val());form_data.append("text",text.val());form_data.append("city",city.val());form_data.append("photo",photo);$.ajax({type:"POST",url:"/review/send",data:form_data,headers:{"X-CSRF-TOKEN":$("meta[name=csrf-token]").attr("content")},dataType:"JSON",contentType:false,processData:false,beforeSend:function(){submit_btn.attr("disabled","disabled")},success:function(b){if(b.status&&b.status==="success"){$(".review-modal__result").show();$(".review-modal__form").hide()}else{alert("При загрузке произошла ошибка. Поробуйте повторить попытку позже")}},error:function(){alert("При загрузке произошла ошибка. Поробуйте повторить попытку позже")},complete:function(){submit_btn.removeAttr("disabled")}})});
